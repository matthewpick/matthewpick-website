---
import BaseHead from '../components/BaseHead.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import { SITE_DESCRIPTION } from '../consts';

interface Props {
  title: string;
  description?: string;
  image?: string;
}

const { title, description = SITE_DESCRIPTION, image } = Astro.props;
---

<!doctype html>
<html lang="en">
  <head>
    <BaseHead title={title} description={description} image={image} />
  </head>
  <body class="min-h-screen flex flex-col bg-surface text-primary font-sans">
    <Header />
    <main class="flex-1">
      <slot />
    </main>
    <Footer />
  </body>
</html>

<style is:global>
  :root {
    /* Backgrounds */
    --color-bg: #f8fafc;           /* slate-50 */
    --color-bg-card: #ffffff;       /* white */
    --color-bg-subtle: #f1f5f9;     /* slate-100 */
    --color-bg-input: #f8fafc;      /* slate-50 */

    /* Text */
    --color-text: #0f172a;          /* slate-900 */
    --color-text-secondary: #475569; /* slate-600 */
    --color-text-muted: #64748b;    /* slate-500 */
    --color-text-placeholder: #94a3b8; /* slate-400 */

    /* Borders */
    --color-border: #e2e8f0;        /* slate-200 */
    --color-border-hover: #cbd5e1;  /* slate-300 */

    /* Primary accent (green) */
    --color-accent: #3d7a5a;
    --color-accent-hover: #2d5a42;
    --color-accent-subtle: rgba(61, 122, 90, 0.1);

    /* Secondary accent (warm coral) */
    --color-secondary: #e07a5f;
    --color-secondary-light: #e99a85;
    --color-secondary-dark: #c45d42;

    /* Decorative greens */
    --color-sage-300: #a8bda8;
    --color-sage-500: #8a9f8a;
    --color-sage-700: #6b7d6b;
    --color-moss: #4A6B52;
    --color-moss-light: #6B8F74;

    /* Selection */
    --color-selection: rgba(61, 122, 90, 0.3);
  }

  .dark {
    /* Backgrounds */
    --color-bg: #0F1A14;            /* dark-earth */
    --color-bg-card: #1A2B22;       /* deep-green */
    --color-bg-subtle: #1A2B22;     /* deep-green */
    --color-bg-input: rgba(37, 61, 48, 0.5); /* forest/50 */

    /* Text */
    --color-text: #F5F7F4;          /* off-white */
    --color-text-secondary: rgba(245, 247, 244, 0.8);
    --color-text-muted: rgba(245, 247, 244, 0.6);
    --color-text-placeholder: rgba(245, 247, 244, 0.4);

    /* Borders */
    --color-border: rgba(37, 61, 48, 0.5); /* forest/50 */
    --color-border-hover: rgba(245, 247, 244, 0.2);

    /* Primary accent (sage-light in dark mode) */
    --color-accent: #A3B896;
    --color-accent-hover: #8a9f8a;
    --color-accent-subtle: rgba(163, 184, 150, 0.1);

    /* Secondary accent (warm coral - lighter in dark) */
    --color-secondary: #e99a85;
    --color-secondary-light: #f0b5a5;
    --color-secondary-dark: #e07a5f;

    /* Selection */
    --color-selection: rgba(163, 184, 150, 0.3);
  }

  html {
    scroll-behavior: smooth;
  }

  ::selection {
    background-color: var(--color-selection);
  }

  /* Prose theming */
  .prose-themed {
    --tw-prose-body: var(--color-text-secondary);
    --tw-prose-headings: var(--color-text);
    --tw-prose-links: var(--color-accent);
    --tw-prose-bold: var(--color-text);
    --tw-prose-counters: var(--color-accent);
    --tw-prose-bullets: var(--color-accent);
    --tw-prose-hr: var(--color-border);
    --tw-prose-quotes: var(--color-text-secondary);
    --tw-prose-quote-borders: var(--color-accent);
    --tw-prose-code: var(--color-accent);
    --tw-prose-pre-code: var(--color-text);
    --tw-prose-pre-bg: #1A2B22;
  }

  .prose-themed a {
    text-decoration: none;
  }

  .prose-themed a:hover {
    text-decoration: underline;
  }

  .prose-themed code:not(pre code) {
    background-color: var(--color-bg-subtle);
    padding: 0.125rem 0.375rem;
    border-radius: 0.375rem;
  }

  .prose-themed code::before,
  .prose-themed code::after {
    content: none;
  }

  .prose-themed pre {
    border: 1px solid var(--color-border);
    border-radius: 0.75rem;
  }

  .prose-themed img {
    border: 1px solid var(--color-border);
    border-radius: 0.75rem;
  }

  .prose-themed blockquote {
    background-color: var(--color-bg-subtle);
    border-radius: 0 0.5rem 0.5rem 0;
    padding-top: 0.75rem;
    padding-bottom: 0.75rem;
  }

  .prose-themed blockquote p {
    margin-bottom: 1.5em !important;
  }

  .prose-themed blockquote p:last-child {
    margin-bottom: 0 !important;
  }

  /* Callout box - auto-spaces paragraphs from blank lines */
  .callout {
    display: flex;
    flex-direction: column;
    gap: 1em;
  }
</style>
